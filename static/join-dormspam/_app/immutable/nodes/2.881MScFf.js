import{y as pe,z as _e,q as Q,j as he,s as B,n as C,A as be,B as X,d as te,C as Z,D as ve}from"../chunks/scheduler.CbUZYCQZ.js";import{q as ne,a as x,n as re,t as L,S as H,i as F,e as y,s as A,c as w,y as j,h as R,j as h,g as m,o as I,m as S,b as E,d as P,f as $,k as b,l as D,u as Y,v as G,w as z,x as V,z as K,A as ke}from"../chunks/index.gXkGRXtP.js";import{d as ie,w as ye}from"../chunks/index.B7VBzcda.js";function ee(s,e){const l=e.token={};function n(t,r,o,a){if(e.token!==l)return;e.resolved=a;let u=e.ctx;o!==void 0&&(u=u.slice(),u[o]=a);const d=t&&(e.current=t)(u);let p=!1;e.block&&(e.blocks?e.blocks.forEach((f,i)=>{i!==r&&f&&(ne(),x(f,1,1,()=>{e.blocks[i]===f&&(e.blocks[i]=null)}),re())}):e.block.d(1),d.c(),L(d,1),d.m(e.mount(),e.anchor),p=!0),e.block=d,e.blocks&&(e.blocks[r]=d),p&&he()}if(pe(s)){const t=_e();if(s.then(r=>{Q(t),n(e.then,1,e.value,r),Q(null)},r=>{if(Q(t),n(e.catch,2,e.error,r),Q(null),!e.hasCatch)throw r}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function ue(s,e,l){const n=e.slice(),{resolved:t}=s;s.current===s.then&&(n[s.value]=t),s.current===s.catch&&(n[s.error]=t),s.block.p(n,l)}function we(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fe={exports:{}};(function(s){var e=function(){var l="__winchan_relay_frame",n="die";function t(i,c,_){i.attachEvent?i.attachEvent("on"+c,_):i.addEventListener&&i.addEventListener(c,_,!1)}function r(i,c,_){i.detachEvent?i.detachEvent("on"+c,_):i.removeEventListener&&i.removeEventListener(c,_,!1)}function o(){if(typeof navigator>"u")return!1;var i=-1,c=navigator.userAgent;if(navigator.appName==="Microsoft Internet Explorer"){var _=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");_.exec(c)!=null&&(i=parseFloat(RegExp.$1))}else if(c.indexOf("Trident")>-1){var _=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})");_.exec(c)!==null&&(i=parseFloat(RegExp.$1))}return i>=8}function a(){try{var i=navigator.userAgent;return i.indexOf("Fennec/")!=-1||i.indexOf("Firefox/")!=-1&&i.indexOf("Android")!=-1}catch{}return!1}function u(){return typeof window<"u"&&window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage}function d(i){/^https?:\/\//.test(i)||(i=window.location.href);var c=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(i);return c?c[1]:i}function p(){for(var i=window.opener.frames,c=i.length-1;c>=0;c--)try{if(i[c].location.protocol===window.location.protocol&&i[c].location.host===window.location.host&&i[c].name===l)return i[c]}catch{}}var f=o();return u()?{open:function(i,c){if(!c)throw"missing required callback argument";var _;i.url||(_="missing required 'url' parameter"),i.relay_url||(_="missing required 'relay_url' parameter"),_&&setTimeout(function(){c(_)},0),i.window_name||(i.window_name=null),(!i.window_features||a())&&(i.window_features=void 0);var k,M=i.origin||d(i.url);if(M!==d(i.relay_url))return setTimeout(function(){c("invalid arguments: origin of url and relay_url must match")},0);var T;f&&(k=document.createElement("iframe"),k.setAttribute("src",i.relay_url),k.style.display="none",k.setAttribute("name",l),document.body.appendChild(k),T=k.contentWindow);var g=i.popup||window.open(i.url,i.window_name,i.window_features);i.popup&&(g.location.href=i.url),T||(T=g);var v=setInterval(function(){g&&g.closed&&(O(),c&&(c("User closed the popup window"),c=null))},500),N=JSON.stringify({a:"request",d:i.params});function O(){if(k&&document.body.removeChild(k),k=void 0,v&&(v=clearInterval(v)),r(window,"message",U),r(window,"unload",O),g)try{g.close()}catch{T.postMessage(n,M)}g=T=void 0}t(window,"unload",O);function U(J){if(J.origin===M){try{var q=JSON.parse(J.data)}catch(se){if(c)return c(se);throw se}q.a==="ready"?T.postMessage(N,M):q.a==="error"?(O(),c&&(c(q.d),c=null)):q.a==="response"&&(O(),c&&(c(null,q.d),c=null))}}return t(window,"message",U),{originalPopup:g,close:O,focus:function(){if(g)try{g.focus()}catch{}}}},onOpen:function(i){var c="*",_=f?p():window.opener;if(!_)throw"can't find relay frame";function k(v){v=JSON.stringify(v),f?_.doPost(v,c):_.postMessage(v,c)}function M(v){var N;try{N=JSON.parse(v.data)}catch{}!N||N.a!=="request"||(r(window,"message",M),c=v.origin,i&&setTimeout(function(){i(c,N.d,function(O){i=void 0,k({a:"response",d:O})})},0))}function T(v){if(v.data===n)try{window.close()}catch{}}t(f?_:window,"message",M),t(f?_:window,"message",T);try{k({a:"ready"})}catch{t(_,"load",function(N){k({a:"ready"})})}var g=function(){try{r(f?_:window,"message",T)}catch{}i&&k({a:"error",d:"client closed window"}),i=void 0;try{window.close()}catch{}};return t(window,"unload",g),{detach:function(){r(window,"unload",g)}}}}:{open:function(i,c,_,k){setTimeout(function(){k("unsupported browser")},0)},onOpen:function(i){setTimeout(function(){i("unsupported browser")},0)}}}();s.exports&&(s.exports=e)})(fe);var ge=fe.exports;const Ne=we(ge),ae="https://webathena.mit.edu",Ee="ATHENA.MIT.EDU",$e=["moira","moira7.mit.edu"];function Ce(){let s,e;const l=new Promise((n,t)=>{s=n,e=t});return Ne.open({url:`${ae}/#!request_ticket_v1`,relay_url:`${ae}/relay.html`,params:{realm:Ee,principal:$e}},function(n,t){n||t.status!=="OK"?e(n):s(t.session)}),l}function Te(s){return btoa(JSON.stringify(s))}function Me(s){return s===null?null:s.cname.nameString[0]}function Pe(s){let e,l=`<img src="/join-dormspam/spam.jpg" alt="spam (the food)" id="spam" class="svelte-199418c"/>
	Join dormspam`,n,t,r="Do you want to stay informed about what happens on campus?",o,a,u="<summary>What is this? (click for more info)</summary> <ul><li>insert blurb about dormspam</li></ul> <strong>Pros</strong> <ul><li>so true bestie</li></ul> <strong>Cons</strong> <ul><li>so false worstie</li></ul>";return{c(){e=y("h1"),e.innerHTML=l,n=A(),t=y("p"),t.textContent=r,o=A(),a=y("details"),a.innerHTML=u},l(d){e=w(d,"H1",{"data-svelte-h":!0}),j(e)!=="svelte-1ml9jru"&&(e.innerHTML=l),n=R(d),t=w(d,"P",{"data-svelte-h":!0}),j(t)!=="svelte-7bss0n"&&(t.textContent=r),o=R(d),a=w(d,"DETAILS",{"data-svelte-h":!0}),j(a)!=="svelte-j0mrbx"&&(a.innerHTML=u)},m(d,p){h(d,e,p),h(d,n,p),h(d,t,p),h(d,o,p),h(d,a,p)},p:C,i:C,o:C,d(d){d&&(m(e),m(n),m(t),m(o),m(a))}}}class Se extends H{constructor(e){super(),F(this,e,null,Pe,B,{})}}function Oe(s){let e,l;return{c(){e=y("img"),this.h()},l(n){e=w(n,"IMG",{src:!0,alt:!0}),this.h()},h(){be(e.src,l="/join-dormspam/pacman.gif")||I(e,"src",l),I(e,"alt","Loading...")},m(n,t){h(n,e,t)},p:C,i:C,o:C,d(n){n&&m(e)}}}class me extends H{constructor(e){super(),F(this,e,null,Oe,B,{})}}const xe="https://moira-api.mit.edu";async function oe({method:s,path:e,ticket:l,params:n}){let t="";if(n!==void 0){t="?";for(const[u,d]of n)t+=`${u}=${d}&`;t=t.slice(0,-1)}const r=await fetch(`${xe}${e}${t}`,{headers:{Authorization:`webathena ${l}`},method:s}),o=await r.text();if(o==="success")return o;const a=JSON.parse(o);if(r.status!==200)throw a;return a}function le(s){let e;for(const[l,n]of s)n!==void 0&&(e===void 0&&(e=new Map),e.set(l,n.toString()));return e}async function Le(s,e="me",l,n){const t=await oe({method:"GET",path:`/users/${e}/lists`,ticket:s,params:le(new Map([["include_properties",l],["recurse",n]]))});return t.sort(),t}async function Ae(s,e,l="me",n="user"){return await oe({method:"PUT",path:`/lists/${e}/members/${l}`,ticket:s,params:le(new Map([["type",n]]))})}async function Re(s,e,l="me",n="user"){return await oe({method:"DELETE",path:`/lists/${e}/members/${l}`,ticket:s,params:le(new Map([["type",n]]))})}var de=(s=>(s[s.mailman=0]="mailman",s[s.moira=1]="moira",s))(de||{});const W="random-hall-dormspam",je="gsc-clearance-hms-",De=new Map([["baker-house",{friendlyName:"Baker",listName:"baker-forum",listType:0}],["burton-conner-house",{friendlyName:"BC",listName:"bc-talk",listType:0}],["east-campus",{friendlyName:"East Campus",listName:"ec-discuss",listType:1}],["macgregor-house",{friendlyName:"MacGregor",listName:"macgregor",listType:0}],["maseeh-hall",{friendlyName:"Maseeh",listName:"maseeh-talk",listType:0}],["mccormick-hall",{friendlyName:"McCormick",listName:"mccormick-announce",listType:1}],["new-house",{friendlyName:"New House",listName:"nh-forum",listType:1}],["new-vassar",{friendlyName:"New Vassar",listName:"new-vassar-forum",listType:0}],["next-house",{friendlyName:"Next",listName:"next-forum",listType:1}],["random-hall",{friendlyName:"Random",listName:"random-hall-dormspam",listType:1}],["simmons-hall",{friendlyName:"Simmons",listName:"sponge-talk",listType:0}]]);function Ie(s){let e,l,n=s[1].name+"",t,r,o,a,u=s[1].message+"",d;return{c(){e=y("h3"),l=E("An error ("),t=E(n),r=E(") occurred"),o=A(),a=y("p"),d=E(u)},l(p){e=w(p,"H3",{});var f=P(e);l=$(f,"An error ("),t=$(f,n),r=$(f,") occurred"),f.forEach(m),o=R(p),a=w(p,"P",{});var i=P(a);d=$(i,u),i.forEach(m)},m(p,f){h(p,e,f),b(e,l),b(e,t),b(e,r),h(p,o,f),h(p,a,f),b(a,d)},p(p,f){f&2&&n!==(n=p[1].name+"")&&D(t,n),f&2&&u!==(u=p[1].message+"")&&D(d,u)},d(p){p&&(m(e),m(o),m(a))}}}function Ue(s){let e,l;return{c(){e=y("p"),l=E(s[0])},l(n){e=w(n,"P",{});var t=P(e);l=$(t,s[0]),t.forEach(m)},m(n,t){h(n,e,t),b(e,l)},p(n,t){t&1&&D(l,n[0])},d(n){n&&m(e)}}}function qe(s){let e,l="Permission denied :(";return{c(){e=y("p"),e.textContent=l},l(n){e=w(n,"P",{"data-svelte-h":!0}),j(e)!=="svelte-4kjn3o"&&(e.textContent=l)},m(n,t){h(n,e,t)},p:C,d(n){n&&m(e)}}}function Je(s){let e;function l(r,o){return r[1].name==="MR_PERM"?qe:r[1].name==="MR_NO_MATCH"?Ue:Ie}let n=l(s),t=n(s);return{c(){t.c(),e=S()},l(r){t.l(r),e=S()},m(r,o){t.m(r,o),h(r,e,o)},p(r,[o]){n===(n=l(r))&&t?t.p(r,o):(t.d(1),t=n(r),t&&(t.c(),t.m(e.parentNode,e)))},i:C,o:C,d(r){r&&m(e),t.d(r)}}}function We(s,e,l){let{noResultsError:n="There is nothing here."}=e,{error:t}=e;return s.$$set=r=>{"noResultsError"in r&&l(0,n=r.noResultsError),"error"in r&&l(1,t=r.error)},[n,t]}class Be extends H{constructor(e){super(),F(this,e,We,Je,B,{noResultsError:0,error:1})}}function He(s){let e,l,n,t={ctx:s,current:null,token:null,hasCatch:!0,pending:Ke,then:Ge,catch:Ye,error:17,blocks:[,,,]};return ee(l=s[3],t),{c(){e=S(),t.block.c()},l(r){e=S(),t.block.l(r)},m(r,o){h(r,e,o),t.block.m(r,t.anchor=o),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(r,o){s=r,t.ctx=s,o&8&&l!==(l=s[3])&&ee(l,t)||ue(t,s,o)},i(r){n||(L(t.block),n=!0)},o(r){for(let o=0;o<3;o+=1){const a=t.blocks[o];x(a)}n=!1},d(r){r&&m(e),t.block.d(r),t.token=null,t=null}}}function Fe(s){let e;function l(r,o){return r[0]?Ze:Qe}let n=l(s),t=n(s);return{c(){t.c(),e=S()},l(r){t.l(r),e=S()},m(r,o){t.m(r,o),h(r,e,o)},p(r,o){n===(n=l(r))&&t?t.p(r,o):(t.d(1),t=n(r),t&&(t.c(),t.m(e.parentNode,e)))},i:C,o:C,d(r){r&&m(e),t.d(r)}}}function Ye(s){let e,l;return e=new Be({props:{error:s[17]}}),{c(){Y(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,t){z(e,n,t),l=!0},p(n,t){const r={};t&8&&(r.error=n[17]),e.$set(r)},i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function Ge(s){let e;function l(r,o){if(r[2]===r[6].add)return Ve;if(r[2]===r[6].remove)return ze}let n=l(s),t=n&&n(s);return{c(){e=y("p"),t&&t.c()},l(r){e=w(r,"P",{});var o=P(e);t&&t.l(o),o.forEach(m)},m(r,o){h(r,e,o),t&&t.m(e,null)},p(r,o){n===(n=l(r))&&t?t.p(r,o):(t&&t.d(1),t=n&&n(r),t&&(t.c(),t.m(e,null)))},i:C,o:C,d(r){r&&m(e),t&&t.d()}}}function ze(s){let e,l,n,t,r,o,a="I changed my mind, please re-subscribe me",u,d;return{c(){e=y("p"),l=E("😥 Sorry to see you go. You have been unsuccessfully unsubscribed from "),n=E(s[1]),t=E("."),r=A(),o=y("button"),o.textContent=a,this.h()},l(p){e=w(p,"P",{});var f=P(e);l=$(f,"😥 Sorry to see you go. You have been unsuccessfully unsubscribed from "),n=$(f,s[1]),t=$(f,"."),f.forEach(m),r=R(p),o=w(p,"BUTTON",{id:!0,"data-svelte-h":!0}),j(o)!=="svelte-1kdcdv0"&&(o.textContent=a),this.h()},h(){I(o,"id","subscribe")},m(p,f){h(p,e,f),b(e,l),b(e,n),b(e,t),h(p,r,f),h(p,o,f),u||(d=K(o,"click",s[14]),u=!0)},p(p,f){f&2&&D(n,p[1])},d(p){p&&(m(e),m(r),m(o)),u=!1,d()}}}function Ve(s){let e,l,n,t;return{c(){e=y("p"),l=E("🎉 Successfully subscribed to "),n=E(s[1]),t=E(".")},l(r){e=w(r,"P",{});var o=P(e);l=$(o,"🎉 Successfully subscribed to "),n=$(o,s[1]),t=$(o,"."),o.forEach(m)},m(r,o){h(r,e,o),b(e,l),b(e,n),b(e,t)},p(r,o){o&2&&D(n,r[1])},d(r){r&&m(e)}}}function Ke(s){let e,l="Asking Moira to do the thing...",n,t,r;return t=new me({}),{c(){e=y("p"),e.textContent=l,n=A(),Y(t.$$.fragment)},l(o){e=w(o,"P",{"data-svelte-h":!0}),j(e)!=="svelte-a55ybq"&&(e.textContent=l),n=R(o),G(t.$$.fragment,o)},m(o,a){h(o,e,a),h(o,n,a),z(t,o,a),r=!0},p:C,i(o){r||(L(t.$$.fragment,o),r=!0)},o(o){x(t.$$.fragment,o),r=!1},d(o){o&&(m(e),m(n)),V(t,o)}}}function Qe(s){let e,l,n,t,r,o,a;function u(f,i){return f[5](W)?et:Xe}let p=u(s)(s);return{c(){e=y("p"),l=E("We could not detect what dorm you are in. We can subscribe you to "),n=y("code"),t=E(W),r=E(`,
            which is open to everyone, whether you are on a dorm or not.`),o=A(),p.c(),a=S()},l(f){e=w(f,"P",{});var i=P(e);l=$(i,"We could not detect what dorm you are in. We can subscribe you to "),n=w(i,"CODE",{});var c=P(n);t=$(c,W),c.forEach(m),r=$(i,`,
            which is open to everyone, whether you are on a dorm or not.`),i.forEach(m),o=R(f),p.l(f),a=S()},m(f,i){h(f,e,i),b(e,l),b(e,n),b(n,t),b(e,r),h(f,o,i),p.m(f,i),h(f,a,i)},p(f,i){p.p(f,i)},d(f){f&&(m(e),m(o),m(a)),p.d(f)}}}function Ze(s){let e,l;function n(o,a){return a&1&&(e=null),o[0].listType===de.mailman?rt:(e==null&&(e=!!o[5](o[0].listName)),e?nt:tt)}let t=n(s,-1),r=t(s);return{c(){r.c(),l=S()},l(o){r.l(o),l=S()},m(o,a){r.m(o,a),h(o,l,a)},p(o,a){t===(t=n(o,a))&&r?r.p(o,a):(r.d(1),r=t(o),r&&(r.c(),r.m(l.parentNode,l)))},d(o){o&&m(l),r.d(o)}}}function Xe(s){let e,l="Subscribe me to dormspam!",n,t;return{c(){e=y("button"),e.textContent=l,this.h()},l(r){e=w(r,"BUTTON",{id:!0,"data-svelte-h":!0}),j(e)!=="svelte-1hw8spc"&&(e.textContent=l),this.h()},h(){I(e,"id","subscribe")},m(r,o){h(r,e,o),n||(t=K(e,"click",s[13]),n=!0)},p:C,d(r){r&&m(e),n=!1,t()}}}function et(s){let e,l="You are already subscribed, though. Do you want to unsubscribe?",n,t,r="Unsubscribe me from dormspam...",o,a;return{c(){e=y("p"),e.textContent=l,n=A(),t=y("button"),t.textContent=r,this.h()},l(u){e=w(u,"P",{"data-svelte-h":!0}),j(e)!=="svelte-1eqg4v3"&&(e.textContent=l),n=R(u),t=w(u,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1j1q8hj"&&(t.textContent=r),this.h()},h(){I(t,"id","unsubscribe"),I(t,"class","svelte-1vy4ajo")},m(u,d){h(u,e,d),h(u,n,d),h(u,t,d),o||(a=K(t,"click",s[12]),o=!0)},p:C,d(u){u&&(m(e),m(n),m(t)),o=!1,a()}}}function tt(s){let e,l,n,t=s[0].friendlyName+"",r,o,a,u=s[0].listName+"",d,p,f,i,c,_=s[0].listName+"",k,M,T;return{c(){e=y("p"),l=E("Since you are in "),n=y("strong"),r=E(t),o=E(`, to be on dormspam,
                    you should subscribe to `),a=y("code"),d=E(u),p=E("."),f=A(),i=y("button"),c=E("Subscribe me to "),k=E(_),this.h()},l(g){e=w(g,"P",{});var v=P(e);l=$(v,"Since you are in "),n=w(v,"STRONG",{});var N=P(n);r=$(N,t),N.forEach(m),o=$(v,`, to be on dormspam,
                    you should subscribe to `),a=w(v,"CODE",{});var O=P(a);d=$(O,u),O.forEach(m),p=$(v,"."),v.forEach(m),f=R(g),i=w(g,"BUTTON",{id:!0});var U=P(i);c=$(U,"Subscribe me to "),k=$(U,_),U.forEach(m),this.h()},h(){I(i,"id","subscribe")},m(g,v){h(g,e,v),b(e,l),b(e,n),b(n,r),b(e,o),b(e,a),b(a,d),b(e,p),h(g,f,v),h(g,i,v),b(i,c),b(i,k),M||(T=K(i,"click",s[11]),M=!0)},p(g,v){v&1&&t!==(t=g[0].friendlyName+"")&&D(r,t),v&1&&u!==(u=g[0].listName+"")&&D(d,u),v&1&&_!==(_=g[0].listName+"")&&D(k,_)},d(g){g&&(m(e),m(f),m(i)),M=!1,T()}}}function nt(s){let e,l,n,t=s[0].friendlyName+"",r,o,a,u=s[0].listName+"",d,p,f,i,c="Unsubscribe me",_,k;return{c(){e=y("p"),l=E("You are in "),n=y("strong"),r=E(t),o=E(`, and you are already
                    subscribed to `),a=y("code"),d=E(u),p=E("."),f=A(),i=y("button"),i.textContent=c,this.h()},l(M){e=w(M,"P",{});var T=P(e);l=$(T,"You are in "),n=w(T,"STRONG",{});var g=P(n);r=$(g,t),g.forEach(m),o=$(T,`, and you are already
                    subscribed to `),a=w(T,"CODE",{});var v=P(a);d=$(v,u),v.forEach(m),p=$(T,"."),T.forEach(m),f=R(M),i=w(M,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(i)!=="svelte-cm245h"&&(i.textContent=c),this.h()},h(){I(i,"id","unsubscribe"),I(i,"class","svelte-1vy4ajo")},m(M,T){h(M,e,T),b(e,l),b(e,n),b(n,r),b(e,o),b(e,a),b(a,d),b(e,p),h(M,f,T),h(M,i,T),_||(k=K(i,"click",s[10]),_=!0)},p(M,T){T&1&&t!==(t=M[0].friendlyName+"")&&D(r,t),T&1&&u!==(u=M[0].listName+"")&&D(d,u)},d(M){M&&(m(e),m(f),m(i)),_=!1,k()}}}function rt(s){let e,l,n,t=s[0].friendlyName+"",r,o,a,u=s[0].listName+"",d,p,f;return{c(){e=y("p"),l=E("You are in "),n=y("strong"),r=E(t),o=E(`. To subscribe or unsubscribe from
                dormspam, please go to `),a=y("a"),d=E(u),p=E("."),this.h()},l(i){e=w(i,"P",{});var c=P(e);l=$(c,"You are in "),n=w(c,"STRONG",{});var _=P(n);r=$(_,t),_.forEach(m),o=$(c,`. To subscribe or unsubscribe from
                dormspam, please go to `),a=w(c,"A",{href:!0});var k=P(a);d=$(k,u),p=$(k,"."),k.forEach(m),c.forEach(m),this.h()},h(){I(a,"href",f=ce(s[0].listName))},m(i,c){h(i,e,c),b(e,l),b(e,n),b(n,r),b(e,o),b(e,a),b(a,d),b(a,p)},p(i,c){c&1&&t!==(t=i[0].friendlyName+"")&&D(r,t),c&1&&u!==(u=i[0].listName+"")&&D(d,u),c&1&&f!==(f=ce(i[0].listName))&&I(a,"href",f)},d(i){i&&m(e)}}}function ot(s){let e,l,n,t;const r=[Fe,He],o=[];function a(u,d){return u[2]===u[6].none?0:1}return e=a(s),l=o[e]=r[e](s),{c(){l.c(),n=S()},l(u){l.l(u),n=S()},m(u,d){o[e].m(u,d),h(u,n,d),t=!0},p(u,[d]){let p=e;e=a(u),e===p?o[e].p(u,d):(ne(),x(o[p],1,1,()=>{o[p]=null}),re(),l=o[e],l?l.p(u,d):(l=o[e]=r[e](u),l.c()),L(l,1),l.m(n.parentNode,n))},i(u){t||(L(l),t=!0)},o(u){x(l),t=!1},d(u){u&&m(n),o[e].d(u)}}}function ce(s){return"https://mailman.mit.edu/mailman/listinfo/"+s}function lt(s,e,l){let n;const t=X("ticket");te(s,t,N=>l(15,n=N));let{lists:r}=e;function o(N){const O=N.filter(U=>U.startsWith("gsc-clearance-"));for(const[U,J]of De.entries()){const q=je+U;if(O.includes(q))return J}return null}let a=o(r),u=W;function d(N){return r.includes(N)}var p=(N=>(N[N.add=0]="add",N[N.remove=1]="remove",N[N.none=2]="none",N))(p||{});let f=2,i=null;function c(N){l(2,f=0),l(3,i=Ae(n,N))}function _(N){l(2,f=1),l(3,i=Re(n,N))}const k=()=>_(a.listName),M=()=>c(a.listName),T=()=>_(W),g=()=>c(W),v=()=>c(u);return s.$$set=N=>{"lists"in N&&l(9,r=N.lists)},s.$$.update=()=>{s.$$.dirty&512&&l(0,a=o(r)),s.$$.dirty&1&&a&&l(1,u=a.listName)},[a,u,f,i,t,d,p,c,_,r,k,M,T,g,v]}class st extends H{constructor(e){super(),F(this,e,lt,ot,B,{lists:9})}}function it(s){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function at(s){let e,l;return e=new st({props:{lists:s[4]}}),{c(){Y(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,t){z(e,n,t),l=!0},p:C,i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function ct(s){let e,l="Getting information from Moira...",n,t,r,o;return r=new me({}),{c(){e=y("p"),e.textContent=l,n=A(),t=y("p"),Y(r.$$.fragment)},l(a){e=w(a,"P",{"data-svelte-h":!0}),j(e)!=="svelte-1sbdagy"&&(e.textContent=l),n=R(a),t=w(a,"P",{});var u=P(t);G(r.$$.fragment,u),u.forEach(m)},m(a,u){h(a,e,u),h(a,n,u),h(a,t,u),z(r,t,null),o=!0},p:C,i(a){o||(L(r.$$.fragment,a),o=!0)},o(a){x(r.$$.fragment,a),o=!1},d(a){a&&(m(e),m(n),m(t)),V(r)}}}function ut(s){let e,l,n={ctx:s,current:null,token:null,hasCatch:!1,pending:ct,then:at,catch:it,value:4,blocks:[,,,]};return ee(s[1],n),{c(){e=S(),n.block.c()},l(t){e=S(),n.block.l(t)},m(t,r){h(t,e,r),n.block.m(t,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(t,[r]){s=t,ue(n,s,r)},i(t){l||(L(n.block),l=!0)},o(t){for(let r=0;r<3;r+=1){const o=n.blocks[r];x(o)}l=!1},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function ft(s,e,l){let n;const t=X("ticket");te(s,t,o=>l(2,n=o)),X("username");const r=Le(n);return[t,r]}class mt extends H{constructor(e){super(),F(this,e,ft,ut,B,{})}}function dt(s){let e,l;return e=new mt({}),{c(){Y(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,t){z(e,n,t),l=!0},p:C,i(n){l||(L(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){V(e,n)}}}function pt(s){let e,l,n="Login with Webathena",t,r;return{c(){e=y("p"),l=y("button"),l.textContent=n,this.h()},l(o){e=w(o,"P",{});var a=P(e);l=w(a,"BUTTON",{id:!0,"data-svelte-h":!0}),j(l)!=="svelte-10n3y96"&&(l.textContent=n),a.forEach(m),this.h()},h(){I(l,"id","login")},m(o,a){h(o,e,a),b(e,l),t||(r=K(l,"click",s[2]),t=!0)},p:C,i:C,o:C,d(o){o&&m(e),t=!1,r()}}}function _t(s){let e,l,n,t,r,o,a,u,d;l=new Se({});const p=[pt,dt],f=[];function i(c,_){return c[0]===null?0:1}return o=i(s),a=f[o]=p[o](s),{c(){e=A(),Y(l.$$.fragment),n=A(),t=y("p"),r=A(),a.c(),u=S(),this.h()},l(c){ke("svelte-to7rcv",document.head).forEach(m),e=R(c),G(l.$$.fragment,c),n=R(c),t=w(c,"P",{}),P(t).forEach(m),r=R(c),a.l(c),u=S(),this.h()},h(){document.title="Join dormspam"},m(c,_){h(c,e,_),z(l,c,_),h(c,n,_),h(c,t,_),h(c,r,_),f[o].m(c,_),h(c,u,_),d=!0},p(c,[_]){let k=o;o=i(c),o===k?f[o].p(c,_):(ne(),x(f[k],1,1,()=>{f[k]=null}),re(),a=f[o],a?a.p(c,_):(a=f[o]=p[o](c),a.c()),L(a,1),a.m(u.parentNode,u))},i(c){d||(L(l.$$.fragment,c),L(a),d=!0)},o(c){x(l.$$.fragment,c),x(a),d=!1},d(c){c&&(m(e),m(n),m(t),m(r),m(u)),V(l,c),f[o].d(c)}}}function ht(s,e,l){let n;const t=ye(null);te(s,t,u=>l(0,n=u)),Z("webathena",t);const r=ie(t,Te);Z("ticket",r);const o=ie(t,Me);Z("username",o);async function a(){ve(t,n=await Ce(),n)}return[n,t,a]}class yt extends H{constructor(e){super(),F(this,e,ht,_t,B,{})}}export{yt as component};
